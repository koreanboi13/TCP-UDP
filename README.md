# Сервер и клиент для обмена сообщениями (TCP и UDP)

Проект включает два типа серверов и клиентов: **TCP** и **UDP**. Серверы принимают сообщения, обрабатывают их и записывают в файл. Клиенты отправляют сообщения на сервер и отслеживают их статус.

## Описание

### 1. **TCP сервер и клиент**
- **TCP сервер** слушает входящие соединения от клиентов на одном порту.
- Клиенты могут подключаться к серверу и отправлять сообщения.
- Сервер записывает полученные сообщения в файл `msg.txt`.

### 2. **UDP сервер и клиент**
- **UDP сервер** слушает несколько портов в указанном диапазоне.
- Сервер обрабатывает входящие сообщения от клиентов и записывает их в файл.
- Сервер удаляет неактивных клиентов через 30 секунд бездействия.
- После получения сообщения "stop" сервер завершает работу.
- **UDP клиент** отправляет сообщения на сервер, отслеживает их статус и получает подтверждения о получении.

## Требования

- **C++ компилятор**: Убедитесь, что у вас установлен компилятор C++ (например, GCC, Clang или MSVC).
- **Windows**: Клиент на Windows использует библиотеку Winsock.
- **Linux/macOS**: Серверы работают на Unix-подобных системах (Linux, macOS).

## Как начать

### 1. Клонируйте репозиторий

```bash
https://github.com/koreanboi13/TCP-UDP.git
cd TCP-UDP
```

### 2. Сборка серверов и клиентов

#### **Linux/macOS (Серверы)**

Для сборки серверов на Linux/macOS используйте команду:

```bash
g++ tcpserver.cpp -o tcpserver
g++ udpserver.cpp -o udpserver
```

#### **Windows (Клиент)**

Для Windows используйте MSVC или MinGW для сборки клиента:

```bash
cl tcpclient.cpp /link ws2_32.lib
cl udpclient.cpp /link ws2_32.lib
```

### 3. Запуск серверов

#### **TCP сервер**

Запустите сервер на указанном порту:

```bash
./tcpserver <port>
```

Пример:
```bash
./tcpserver 5000
```

#### **UDP сервер**

Запустите сервер, указав диапазон портов:

```bash
./udpserver <start_port> <end_port>
```

Пример:
```bash
./udpserver 5000 5010
```

### 4. Запуск клиентов

#### **TCP клиент**

Чтобы запустить клиент, укажите IP-адрес и порт сервера, а также имя файла с сообщениями:

```bash
./tcpclient <server_ip:port> <filename>
```

Пример:
```bash
./tcpclient 127.0.0.1:5000 messages.txt
```

#### **UDP клиент**

Для UDP клиента аналогично, укажите IP-адрес и порт сервера, а также имя файла с сообщениями:

```bash
./udpclient <server_ip:port> <filename>
```

Пример:
```bash
./udpclient 127.0.0.1:5000 messages.txt
```

### 5. Формат файла с сообщениями

Файл с сообщениями должен иметь следующий формат для каждой строки:

```
<дата> <AA> <BBB> <сообщение>
```

Пример:
```
01.01.2022 12 123 Привет, мир!
02.01.2022 14 456 Это тестовое сообщение.
```

### 6. Остановка серверов

- **TCP сервер** завершает работу после получения команды "stop" от клиента.
- **UDP сервер** завершает работу при получении команды "stop" от любого клиента.

## Файлы

- **tcpserver.cpp**: TCP-сервер, который слушает порт и обрабатывает подключения клиентов, записывая сообщения в файл.
- **tcpclient.cpp**: TCP-клиент, который подключается к серверу и отправляет сообщения.
- **udpserver.cpp**: UDP-сервер, который слушает порты в диапазоне и обрабатывает сообщения от клиентов.
- **udpclient.cpp**: UDP-клиент, который отправляет сообщения на сервер и отслеживает их статус.
